<!doctype html>
<html lang="es">
	<meta name="viewport" content="width=device-width, initial-scale=1">
  <head>
    <meta charset="utf-8">
	<title>Documento sin título</title>
	<link href="css/normalize.css" rel="stylesheet" type="text/css">
	<link href="css/style.css" rel="stylesheet" type="text/css">
	<link href="css/menu-hamburguesa.css" rel="stylesheet" type="text/css">
	 
</head>

<body>
	<header class="header" id="header">
		<!--seccion superior de la cabecera-->
		<div class="header-top pi">
		<!--logo-->
			<div class="logo-container">
				<a href="#" class="logo">Logo MenúTitín</a> 
				<a href="#" class="menu-toggle" id="menuOpen"><div class="menu-icon"><span class="line"></span><span class="line"></span><span class="line"></span></div><span>Menú</span></a>
			</div>
		</div>
		<!-- fin header-top -->
		<div class="header-menus cerrado" id="header-menus">
		  <div class="header-menu-top">
		    <!--buscador-->
		    <div class="menu-buscador">
		      <input type="text" placeholder="Buscar...">
	        </div>
		    <!--usuario-->
		    <a href="#"><img src="img/user-icon.svg" alt="" width="25" height="25"/></a>
		    <!--carrito-->
		    <a href="#"><img src="img/carrito-icon.svg" alt="" width="30" height="30"/></a>
		    </div> 
		  <!--menu-->
		  <div class="menu-burguer">
		    <nav id="site-navigation" class="main-navigation">
		      <div id="primary-menu" >
		        <ul class="menu">
		          <li class="page_item"><a href="#">Blog</a></li>
		          <li class="page_item"><a href="#">Front Page</a></li>
		          <li class="page_item"><a href="#">Sample Page</a></li>
		          <li class="page_item"><a href="#">About The Tests</a>
		            <ul class="menu">
		              <li class="page_item "><a href="#">Page Image Alignment</a></li>
		              <li class="page_item"><a href="#">Page Markup And Formatting</a></li>
		              <li class="page_item"><a href="#">Clearing Floats</a></li>
		              <li class="page_item"><a href="#">Page with comments</a></li>
		              <li class="page_item"><a href="#">Page with comments disabled</a></li>
		              </ul>
		            </li>
		          <li class="page_item"><a href="#">Level 1</a>
		            <ul class="menu">
		              <li class="page_item"><a href="#">Level 1a</a>
		                <ul class="menu ">
		                  <li class="page_item"><a href="#">Level 1a1</a></li>
		                  <li class="page_item"><a href="#">Level 1a2</a></li>
		                  <li class="page_item"><a href="#">Level 1a3</a>
							<ul class="menu ">
								<li class="page_item"><a href="#">Level 1a31</a></li>
								<li class="page_item"><a href="#">Level 1a32</a></li>
								<li class="page_item"><a href="#">Level 1a33</a></li>
								</ul>
							</li>
		                  </ul>
		                </li>
		              <li class="page_item"><a href="#">Level 1b</a></li>
		              <li class="page_item"><a href="#">Level 1c</a></li>
		              </ul>
		            </li>
		          <li class="page_item"><a href="#">Lorem Ipsum</a></li>
		          <li class="page_item"><a href="#">Page A</a></li>
		          <li class="page_item"><a href="#">Page B</a></li>
					
	            </ul>
	          </div>
	        </nav>
	      </div>
		  <!-- fin menu-burguer -->
		  
		  <div class="header-menu-pie">
			<!--social-->
		    <div class="header-menu-social">
				<a href="#"><svg class="f0hiXs2f jCt853Wn" tabindex="" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" role="img" aria-label="Pinterest"><path d="M16,0C7.2,0,0,7.2,0,16c0,8.8,7.2,16,16,16c8.8,0,16-7.2,16-16C32,7.2,24.8,0,16,0z M17.6,21.5 c-1.3,0-2.5-0.7-2.9-1.4c0,0-0.7,2.6-0.8,3.2c-0.5,1.8-2,3.6-2.1,3.8c-0.1,0.1-0.3,0.1-0.3-0.1c0-0.2-0.4-2.5,0-4.4l1.5-6.3 c0,0-0.4-0.7-0.4-1.8c0-1.7,1-3,2.3-3c1.1,0,1.6,0.8,1.6,1.7c0,1.1-0.7,2.6-1,4.1c-0.3,1.2,0.6,2.2,1.9,2.2c2.2,0,3.8-2.8,3.8-6.1 c0-2.5-1.8-4.4-4.9-4.4c-3.6,0-5.8,2.6-5.8,5.5c0,1,0.3,1.7,0.8,2.3c0.2,0.3,0.2,0.4,0.2,0.6L11,18.3c-0.1,0.3-0.3,0.4-0.6,0.3 C8.8,17.9,8,16.2,8,14.2C8,10.9,10.8,7,16.5,7C21,7,24,10.2,24,13.6C24,18.1,21.4,21.5,17.6,21.5z"></path></svg></a> - 
				<a href="#"><svg class="f0hiXs2f jCt853Wn" tabindex="" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" role="img" aria-label="Twitter"><path d="M16,0C7.2,0,0,7.2,0,16c0,8.8,7.2,16,16,16s16-7.2,16-16C32,7.2,24.8,0,16,0z M24.1,12.7l0,0.5 c0,5-3.9,10.8-11.1,10.8c-2.2,0-4.3-0.6-6-1.7c0.3,0,0.6,0.1,0.9,0.1c1.8,0,3.5-0.6,4.8-1.6c-1.7,0-3.1-1.1-3.6-2.6 c0.2,0,0.5,0.1,0.7,0.1c0.4,0,0.7,0,1-0.1c-1.8-0.3-3.1-1.9-3.1-3.7v0c0.5,0.3,1.1,0.5,1.8,0.5c-1-0.7-1.7-1.8-1.7-3.1 c0-0.7,0.2-1.3,0.5-1.9c1.9,2.3,4.8,3.8,8,4c-0.1-0.3-0.1-0.6-0.1-0.9c0-2.1,1.7-3.8,3.9-3.8c1.1,0,2.1,0.5,2.8,1.2 c0.9-0.2,1.7-0.5,2.5-0.9c-0.3,0.9-0.9,1.6-1.7,2.1c0.8-0.1,1.5-0.3,2.2-0.6C25.5,11.5,24.8,12.2,24.1,12.7z"></path></svg></a> - 
				<a href="#"><svg class="f0hiXs2f jCt853Wn" tabindex="" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" role="img" aria-label="Facebook"><path d="M16,0C7.2,0,0,7.2,0,16c0,8.8,7.2,16,16,16c8.8,0,16-7.2,16-16C32,7.2,24.8,0,16,0z M20,11h-2.1 c-0.6,0-0.9,0.5-0.9,1.1V13h2.9l-0.5,3H17v8h-3v-8h-2v-3h2v-1.5h0C14,9.7,14.6,8.1,17.6,8v0H20V11z"></path></svg></a></div>
		    <!--legal-->
		    <div class="header-menu-legal">Titin colomer 2021 &copy;</div>
          </div>
		</div>
    </header>
	<div class="capa-off off" id="capa-off"></div>
<div class="body-content">
  <h1>menu hamburguesa jabascript</h1>
	esto es un menú estilo hamburguesa con submenus hecho con javascript css y html</div>
<script>
		//abrir y cerrar menú principal
		function toggleMenuPpal() {
			const getHeader = document.getElementById("header-menus");
			getHeader.classList.toggle("cerrado")
			const getMenuOpen= document.getElementById("menuOpen");
			getMenuOpen.classList.toggle("cerrado");
			
			//la capa que oscurece el fondo
			const capaOff = document.getElementById("capa-off");
			capaOff.classList.toggle("off")
			capaOff.addEventListener("click",toggleMenuPpal , false);
  		}
		  
		  const cerrarMenu = document.getElementById("menuOpen");
		cerrarMenu.addEventListener("click",toggleMenuPpal , false);	
		
		//funcion para cerrar concualquier clic en el documento

		
		
		//MENU-BURGUER

		//obtenemos todos los objetos que tengan la classe 'menu' 
		let getMenu = document.getElementsByClassName('menu');
		// de ellos obtenemos todos los objetos que tengan dentro alguna classe 'menu' // .menu .menu
		for ( i = 0; i < getMenu.length; i++) {
			getMenu = getMenu[i].getElementsByClassName('menu');
			
			for ( i = 0; i < getMenu.length; i++) {
			// y le añadimos la class 'children' // .menu.children
			getMenu[i].classList.add('children');
}
}

		//obtenemos todos los objetos que tengan la class 'children'  // .menu.children
		const getChildren = document.querySelectorAll('ul.children ');
		//añadimos a su padre la class page_item_has_children
		for ( i = 0; i < getChildren.length; i++) {
			getChildren[i].parentElement.classList.add('page_item_has_children');
		
			
			//camptamos el contenido del li padre para que luego sea el título del submenú
			const getTitulos= getChildren[i].parentElement.innerHTML;
			
			//generamos el li de cerrar el submenú con su título y todo
			const createLi = document.createElement('li');
			createLi.className = 'volver-toggle';
			createLi.innerHTML = '<span class="left-arrow"><img src="img/arrow-left.svg" alt="habrir menú" width="30px" height="30px"></span> ' + getTitulos;
			
			getChildren[i].insertAdjacentElement("afterbegin", createLi);
			
 		}


		//generamos todos los botones de volver de los submenús
			const volver =  document.querySelectorAll('.volver-toggle');
			for ( i=0; i < volver.length ; i++){
				//les añadimos la funcion cerrar al parent element
				volver[i].addEventListener("click", function(){this.parentElement.classList.toggle('active');}, false);
		}

		//obtenemos todos los objetos que tengan la class 'page_item_has_children'  
		const getItemsHasChildren = document.getElementsByClassName('page_item_has_children');
		//añadimos a sus enlaces la clase 'item-link'
		for ( i = 0; i < getItemsHasChildren.length; i++) {
			getItemsHasChildren[i].querySelector('a').className='item-link';
}
		


		//seleccionamos todos los a que hay en los li con class 'page_item_has_children'
		const getItemLink = document.body.querySelectorAll('.item-link');
		//a cada uno de ellos le añadimos el botón de togglear
		for (i = 0; i < getItemLink.length; i++) {
	
			const navArrow = document.createElement('span');
			navArrow.className = 'sub-nav-toggle';
			navArrow.innerHTML = ' <span class="right-arrow"><img src="img/arrow-right.svg" alt="habrir menú" width="20px" height="20px"></span> ';
			getItemLink[i].parentNode.insertBefore(navArrow, getItemLink[i].nextSibling);
		
			if(getItemLink.hasOwnProperty(i)) {
			getItemLink[i].onclick = function() {
				this.parentElement.querySelector('.children').classList.toggle("active");
				}
			}
		}

		//al boton de togglear le añadimos la funcion de cambiar class 'active'
		const getSubNavToogle = document.querySelectorAll('.sub-nav-toggle');

		for( i in getSubNavToogle) {
			if(getSubNavToogle.hasOwnProperty(i)) {
				getSubNavToogle[i].onclick = function() {
					this.parentElement.querySelector('.children').classList.toggle("active");
				}
			}
		} 
	
		
		
start();
window.onresize = start;
function start(){
  
	
		//tamaño del menu hamburguesa
		const tamañoMenuTotal = document.getElementById("site-navigation").clientHeight ;
		let tamañoPantalla = document.querySelector("body").clientHeight ;
		const tamañoBuscador = document.querySelector(".header-menu-top").clientHeight ;
		const tamañoPie = document.querySelector(".header-menu-pie").clientHeight ;
		
		tamañoPantalla  = tamañoPantalla-tamañoBuscador-tamañoPie-2; // 2 para corregir
		
		if(tamañoMenuTotal!=tamañoPantalla){
			//document.getElementById("site-navigation").style.height = tamañoPantallaPx/2 ;
			const canvas = document.getElementById("site-navigation");
			canvas.setAttribute("style", "height:"+tamañoPantalla+"px");
		   }
		}
		
		
		
	</script>
	<link href="js/menu-hamburguesa.js"  type="text/javascript">
</body>
</html>
